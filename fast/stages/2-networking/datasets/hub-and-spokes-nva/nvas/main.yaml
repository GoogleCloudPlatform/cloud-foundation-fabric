# skip boilerplate check
---
# start of document (---) avoids errors if the file only contains comments

# yaml-language-server: $schema=../../../schemas/nva.schema.json

project_id: $project_ids:net-core-0
name: main
region: europe-west8

auto_instance_config:
  image: projects/cos-cloud/global/images/family/cos-stable
  instance_type: e2-standard-4
  tags:
    - nva
    - test
  nics:
    - network: $networks:hub
      subnet: $subnets:hub/europe-west8/hub-default
      routes:
        - 10.71.0.0/16
      masquerade: true
    - network: $networks:prod
      subnet: $subnets:prod/europe-west8/prod-default
      routes:
        - 10.72.0.0/16
    - network: $networks:dev
      subnet: $subnets:dev/europe-west8/dev-default
      routes:
        - 10.73.0.0/16
    - network: $networks:mgmt
      subnet: $subnets:mgmt/europe-west8/mgmt-default

ilb_config:
  health_check:
    tcp:
      port: 22
  instance_groups:
    # Keyed by zone
    b:
      auto_create_instances: 1
      attach_instances: {}
        # - name1: self-link
        # - name2: self-link
    c:
      auto_create_instances: 2
  forwarding_rules:
    - network: $networks:hub
      subnet: $subnets:hub/europe-west8/hub-default
    - network: $networks:prod
      subnet: $subnets:prod/europe-west8/prod-default
    - network: $networks:dev
      subnet: $subnets:dev/europe-west8/dev-default
