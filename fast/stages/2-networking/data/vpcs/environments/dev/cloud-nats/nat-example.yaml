# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Cloud NAT Configuration Example
# This example demonstrates a Cloud NAT with automatic IP allocation

vpc_key: dev
vpc_router_id: $vpc_router_ids:environments/dev/nat-router
region: us-central1

# NAT IP allocation - AUTO_ONLY or MANUAL_ONLY
nat_ip_allocate_option: AUTO_ONLY

# Source subnetwork IP ranges to NAT
# Options: ALL_SUBNETWORKS_ALL_IP_RANGES, ALL_SUBNETWORKS_ALL_PRIMARY_IP_RANGES, LIST_OF_SUBNETWORKS
source_subnetwork_ip_ranges_to_nat: ALL_SUBNETWORKS_ALL_IP_RANGES

# Connection timeout settings (seconds)
icmp_idle_timeout_sec: 30
tcp_established_idle_timeout_sec: 1200
tcp_transitory_idle_timeout_sec: 30
udp_idle_timeout_sec: 30

# Port allocation
min_ports_per_vm: 64
enable_dynamic_port_allocation: false
enable_endpoint_independent_mapping: true

# Logging configuration
log_config:
  enable: true
  filter: ERRORS_ONLY
